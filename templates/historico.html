<!DOCTYPE html><html lang='pt-BR'><head><meta charset='utf-8'><title>Histórico</title><meta name='viewport' content='width=device-width, initial-scale=1'><link rel='stylesheet' href='/static/css/style.css'><style>.container{max-width:1100px;margin:24px auto;padding:0 16px}table{width:100%;border-collapse:collapse;margin-top:12px}th,td{border:1px solid #ddd;padding:8px}th{background:#f5f5f5;text-align:left}.flash{background:#eef8ff;border:1px solid #b3dcff;color:#084b83;padding:8px 12px;margin:10px 0;border-radius:4px}</style></head><body>{% include '_navbar.html' %}<div class='container'><h2>Histórico</h2>{% with msgs=get_flashed_messages() %}{% if msgs %}{% for m in msgs %}<div class='flash'>{{ m }}</div>{% endfor %}{% endif %}{% endwith %}<form method='GET' action='{{ url_for("historico") }}' style='display:flex;gap:12px;align-items:end;flex-wrap:wrap;'><div><label for='mes'>Filtrar por mês</label><input type='month' id='mes' name='mes' value='{{ mes or '' }}'></div>{% if meses_disponiveis %}<div><label for='mes_list'>Ou escolha na lista</label><select id='mes_list' onchange="document.getElementById('mes').value=this.value;"><option value=''>Todos</option>{% for ym in meses_disponiveis %}<option value='{{ ym }}' {% if ym==mes %}selected{% endif %}>{{ ym }}</option>{% endfor %}</select></div>{% endif %}<div><button type='submit'>Filtrar</button><a href='{{ url_for("historico") }}'>Limpar</a></div><div><a href='{{ url_for("historico_export", mes=mes) }}'>Exportar Excel</a></div></form><table><thead><tr><th>Data</th><th>Número</th><th>Status</th><th>Usuário</th><th>Inventário ID</th><th>Planta</th></tr></thead><tbody>{% for h in historico %}<tr><td>{{ h['data'] }}</td><td>{{ h['numero'] }}</td><td>{{ h['status'] }}</td><td>{{ h['usuario'] }}</td><td>{{ h['inventario_id'] or '' }}</td><td>{{ h['planta'] }}</td></tr>{% else %}<tr><td colspan='6'>Nenhum registro encontrado para o filtro selecionado.</td></tr>{% endfor %}</tbody></table></div></body></html>