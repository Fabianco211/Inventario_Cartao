<!DOCTYPE html><html lang='pt-BR'><head><meta charset='utf-8'><title>Dashboard</title><meta name='viewport' content='width=device-width, initial-scale=1'><link rel='stylesheet' href='/static/css/style.css'><script src='https://cdn.jsdelivr.net/npm/chart.js'></script><style>.container{max-width:1100px;margin:24px auto;padding:0 16px}.row{display:flex;gap:24px;flex-wrap:wrap;align-items:flex-start}.card{flex:1 1 420px;border:1px solid #eee;border-radius:8px;padding:12px}.flash{background:#eef8ff;border:1px solid #b3dcff;color:#084b83;padding:8px 12px;margin:10px 0;border-radius:4px}</style></head><body>{% include '_navbar.html' %}<div class='container'><h2>Dashboard</h2>{% with msgs=get_flashed_messages() %}{% if msgs %}{% for m in msgs %}<div class='flash'>{{ m }}</div>{% endfor %}{% endif %}{% endwith %}<form method='GET' action='{{ url_for("dashboard") }}' class='filters'><div><label for='mes'>Mês</label><input type='month' id='mes' name='mes' value='{{ mes }}'></div><div><button type='submit'>Aplicar</button></div><div><a href='{{ url_for("dashboard") }}'>Limpar</a></div><div><a href='{{ url_for("inventario") }}'>Ir para Inventário</a></div></form><div class='row'><div class='card'><h3>Planta 1412 — {{ mes }}</h3><canvas id='pie1412' height='260'></canvas></div><div class='card'><h3>Planta 1420 — {{ mes }}</h3><canvas id='pie1420' height='260'></canvas></div></div></div><script>const dados={{ dados|tojson|safe }};const colors={ok:'#16a34a',nao:'#ef4444'};function makePie(id,ok,nao){const ctx=document.getElementById(id).getContext('2d');new Chart(ctx,{type:'pie',data:{labels:['OK','Não encontrado'],datasets:[{data:[ok,nao],backgroundColor:[colors.ok,colors.nao],borderColor:'#fff',borderWidth:2}]},options:{plugins:{legend:{position:'bottom'},tooltip:{callbacks:{label:(i)=>`${i.label}: ${i.raw}`}}}}})}makePie('pie1412',(dados['1412']?.ok||0),(dados['1412']?.nao||0));makePie('pie1420',(dados['1420']?.ok||0),(dados['1420']?.nao||0));</script></body></html>